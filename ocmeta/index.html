<html>
<head>

        <meta name="viewport" content="width=device-width">
        <title>OCMeta DEVELOPMENT DIARY</title>
        <link rel="shortcut icon" type="image/png" href="img\metalogo.png"/>


        <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"/>
        <script src="https://code.jquery.com/jquery-3.3.1.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
        <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
        <style>
            ul.timeline {
                list-style-type: none;
                position: relative;
            }
            ul.timeline:before {
                content: ' ';
                background: #d4d9df;
                display: inline-block;
                position: absolute;
                left: 29px;
                width: 2px;
                height: 100%;
                z-index: 400;
            }
            ul.timeline > li {
                margin: 20px 0;
                padding-left: 20px;
                margin-bottom: 5rem
            }
            ul.timeline > li.last:before {
                content: ' ';
                background: #212529;
                display: inline-block;
                position: absolute;
                border-radius: 50%;
                border: 4px solid grey;
                left: 20px;
                width: 20px;
                height: 20px;
                z-index: 400;
            }
            ul.timeline > li:before {
                content: ' ';
                background: white;
                display: inline-block;
                position: absolute;
                border-radius: 50%;
                border: 3px solid grey;
                left: 20px;
                width: 20px;
                height: 20px;
                z-index: 400;
            }
            .github-corner:hover .octo-arm{animation:octocat-wave 560ms ease-in-out}@keyframes octocat-wave{0%,100%{transform:rotate(0)}20%,60%{transform:rotate(-25deg)}40%,80%{transform:rotate(10deg)}}@media (max-width:500px){.github-corner:hover .octo-arm{animation:none}.github-corner .octo-arm{animation:octocat-wave 560ms ease-in-out}}
          
        </style>
</head>
<body>
        <nav class="navbar navbar-expand-lg navbar-dark bg-dark" style="padding: 1rem">
                <a class="navbar-brand" href="index.html">
                <img src="img\metalogo.png" width="50" height="50" class="d-inline-block align-top" alt="">
                  OCMeta DEVELOPMENT DIARY
                </a>
                    </nav>
        
                    <a href="https://github.com/opencitations/meta" class="github-corner" aria-label="View source on GitHub" target="_blank"><svg width="80" height="80" viewBox="0 0 250 250" style="fill:#70B7FD; color:#fff; position: absolute; top: 0; border: 0; right: 0;" aria-hidden="true"><path d="M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"></path><path d="M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2" fill="currentColor" style="transform-origin: 130px 106px;" class="octo-arm"></path><path d="M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z" fill="currentColor" class="octo-body"></path></svg></a>

                    <div class="container mt-5 mb-5">
	<div class="row">
		<div class="col-md-6 offset-md-3">
			<h4>Latest News</h4>
			<ul class="timeline">
                    <li class="last">
                            <a href="">WEEK_4</a>
                            <b class="float-right">2019-09-09 to 2019-09-13</b>
                            <p>
                            <ul>
                                <li>Migrator Upgrade</li>
                                <li>Graphlib Upgrade</li>
                                <li>TDD:<b>FAILED</b></li>
                            </ul></p>
                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#w4repo">
                                    Read Report
                            </button>                          
                        </li>
                    <li>
                            <a href="">WEEK_3</a>
                            <b class="float-right">2019-08-19 to 2019-08-25</b>
                            <p>
                            <ul>
                                <li>Created an example Graph (NTriple) to start the TDD of final Migrator script(csv to rdf converter)</li>
                                <li>First Test:<b>FAILED</b></li>
                                <li>Migrator implementation (everything to its job now)</li>
                                <li>Second Test:<b>FAILED</b></li>
                            </ul></p>
                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#w3repo">
                                    Read Report
                            </button>                          
                        </li>
                    <li>
                            <a href="">WEEK_2</a>
                            <b class="float-right">2019-07-15 to 2019-07-21</b>
                            <p>
                            <ul>
                                <li>Graphlib library understood</li>
                                <li>Refactor of Migrator(Beta)</li>
                                <li>Migrator(Beta) upgrade with graphlib, first csv to rdf conversion</li>
                            </ul></p>
                            <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#w2repo">
                                    Read Report
                            </button>                          
                        </li>
				<li>
					<a href="">WEEK_1</a>
                    <b class="float-right">2019-07-08 to 2019-07-12</b>
                    <p>
                    <ul>
                        <li>First approach with graphlib library</li>
                        <li>First code, Starting with Test Driven Development</li>
                        <li>Obviously, first questions e doubts</li>
                    </ul></p>
                    <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#w1repo">
                            Read Report
                    </button>                          
                </li>
                <li>
                    <a href="">POSTER SESSION</a>
                    <b class="float-right">2019-07-01</b>
                    <p>OCMeta poster presentation at ISWS2019</p>
                    <a href="img/ocmetaposter.pdf" target="_blank">
                    <button type="button" class="btn btn-primary">
                            PDF
                    </button> </a> 
                </li>
			</ul>
		</div>
	</div>
</div>
<footer class="footer bg-dark text-white" style="margin-bottom: 0px;margin-top: 60; padding: 20px">
            
        <div class="container-fluid text-center py-2" style="font-size: 80%">
                <div  style="margin-bottom: 10px">
                        <b>Powered by:</b> 
                        <a href="https://getbootstrap.com/" class="text-light">Bootstrap</a> 
                </div>
                  
        
        <a rel="license" href="http://creativecommons.org/licenses/by/4.0"><img alt="Creative Commons License" style=" border-width:0" src="https://i.creativecommons.org/l/by/4.0/88x31.png" /></a><br /> <p style="margin: 0px; font-size: 8pt">This work is licensed under a <a style="color: grey;" rel="license" href="http://creativecommons.org/licenses/by/4.0/">Creative Commons Attribution 4.0 International License</a></p>
</footer>



<div class="modal fade" id="w1repo" tabindex="-1" role="dialog">
        <div class="modal-dialog modal-lg" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle">Week_1 Report</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
              <div>
                  <h5><b>DONE</b></h5>
                  <ul>
                      <li><b>support.py FIX</b>
                          <p> from urllib import quote had an error: unresolved reference.<br>
                          The urllib module has been split into parts and renamed in Python 3 to  urllib.request, urllib.parse, and urllib.error. (https://docs.python.org/2/library/urllib.html)<br>
                            FIX: from urllib.parse import quote</p>
                      </li>
                      <li><b>graphlib study</b><p>After a bit of struggling I manage to understand graphlib workflow (in particular linkings between GraphSet and GraphEntity classes). 
                        I need some clarification on both classes' __init__ parameters (i.e. I understood that Graphset requires 3 strings, but actually I don't know what strings).</p>
                    </li>
                    <li><b>First Code (with TDD)</b>
                        <p>Having troubles with graphlib I started to write a simple code to process and extract information needed from CSV ("class Migrator()").<br>
                        Alongside, I created also the TDD file in order to test every function of Class Migrator.<br>
                        Now I have some questions about what kind of data I will find (i.e. in demo CSV we have a publication with 2 ISSN: Can all entities have more than 1 identifiers for each type?)</p>
                        </li>
                  </ul>
                <h5><b>TODO</b></h5>
                <ol>
                    <li><b>Little Porting</b><p>graphlib and ancillary libraries are in Python 2, some other fixing are required (in support.py def create_literal there's a requirement "basestring" that I can't understand)</p></li>
                    <li><b>Logistics</b><p>Do we need a repository to put intermediary stuff? I.e. Can I push my first codes in OCMeta or is it better to create a new one?</p></li>
                    <li><b>Complete step1</b><ul>
                        <li>Once mastered graphlib, integrate it inside Migrator in order to complete conversions first step.</li>
                        <li>Think about how to better manage Migrator class and its functions (i.e. processing csv inside or outside it?)</li>
                    </ul></li>
                  </ol>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

      <div class="modal fade" id="w2repo" tabindex="-1" role="dialog">
            <div class="modal-dialog modal-lg" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLongTitle">Week_2 Report</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <div>
                      <h5><b>DONE</b></h5>
                      <ul>
                          <li><b><strike>Refactoring</strike> migrator</b>
                              <p> Fixed regular expression's split spaces bug <br> Multiple same type IDs handling <br> Now It has a different output (so, <b>not a refactoring</b>...how to handle TDD?)</p>
                          </li>
                          <li><b>graphlib starts to work</b><p>Here we are! <br> </p>
                        </li>
                        <li><b>Migrator</b>
                            <p>Migrator is gowing up. Now It converts a row into a rdf structure. Sadly I didn't get how to move with TDD here (when output is complex like an RDF)</p>
                            </li>
                      </ul>
                    <h5><b>QUESTIONS</b></h5>
                    <ol>
                        <li><b>How to TDD</b><p>How to move with TDD now that I'm working with rdf files <br> When i change a script i have to keep old TDD file? </p></li>
                        <li><b>RDF</b><ol>
                            <li>I created different rdf files for every entity, unlike the example in The OpenCitations Data Model</li>
                            <li>Can I use auto_compact=True? (json-ld prefixes)</li>
                            <li>Why "Def create_pub_date()" requires a list of dates?</li>
                            <li>The OpenCitations Data Model use a Contributors list, Should I?</li>
                            <li>Do Bibliographic resources have a numeration order (journal, vol, issue...)?</li>
                            <li>In graphlib I can't find reverse properties (obviously it's possible that I simply missed them!)
                                So, I can query publication's authors from publication's rdf, but it would be hard to query author's publications form author's rdf.</li>
                            <li>The OpenCitations Data Model handles first/last page inside a Resource embodiments, Should I?</li></ol>
                        </ol>
                        <h5><b>TODO</b></h5>
                    <ol>
                        <li><b>Improve identifiers handling</b>
                            <p>Write more "if" cases for differet IDs <br>
                            graphlib doesn't handle Crossref and Wikidata, add them (where?)
                        </p>
                        </li>
                        <li><b>Handle Pages</b>
                            <p>See QUESTIONS 2.7
                        </p>
                        </li>
                        <li><b>TDD</b>
                            <p>In this week I left out TDD approach (since I didn't know how to proceed), I absolutely need to restart to use it.
                        </p>
                        </li>
                      </ol>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                </div>
              </div>
            </div>
          </div>


          <div class="modal fade" id="w3repo" tabindex="-1" role="dialog">
                <div class="modal-dialog modal-lg" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLongTitle">Week_3 Report</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                          <h5><b>DONE</b></h5>
                          <ul>
                                <li><b>Graphlib</b>
                                    <p>Creation of new functions to handle crossref, viaf, and wikidata</p>
                                </li>
                              <li><b>example_graph.ttl</b>
                                  <p>This is the TDD expected result, an "handmade" (Semi-Automatic) Turtle serialized rdf (<a href="https://github.com/opencitations/meta/blob/master/tdd/example_graph.ttl">Github</a>)</p>
                              </li>
                              <li><b>TDD</b>
                                <p>Using the <b>example_graph.ttl</b> as expected results the test function compare new graph with it. Graph comparisson is made extracting all graphs' triples as tuples and putting them inside two different sets (once for graph). Sets are easy to compare once created.</p>
                                </li>
                              <li><b>Migrator (the true Migrator) </b><p>After some playground before holidays I have developed (using the right TDD approach) a complete version of Migrator as intended. It simply needs to initialize the class with a processed CSV (dictionary) to do all the job automatically. Data processing and graph serialization are external.</p>
                            </li>
                          </ul>
                        <h5><b>QUESTIONS</b></h5>
                        <ol>
                            <li><b>example_graph</b><p>The entity AR (RoleInTime) of one agent (i.e. author role) has to be created everytime this agent has author role (has i did), or only once?</p></li>
                            <li class="bg-warning"><b>Author more than one time</b> Test is failing because authors entities are created everytime they appear inside csv, obviously creating a new RA will add +1 in RA counter, this mean 2 differents entity (different URI) for the same person</li>
                            </ol>
                            <h5><b>TODO</b></h5>
                        <ol>
                            <li><b>Crossref and Wikidata</b>
                                <p>Add those 2 new IDs to Datacite</p>
                            </li>
                            <li><b>Add MetaID</b>
                                <p>It's missing also inside example_graph.ttl</p>
                            </li>
                            <li><b>GREEN</b>
                                <p>Reach GREEN step in TDD and then refactor</p>
                            </li>
                          </ol>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                  </div>
                </div>
              </div>



              <div class="modal fade" id="w4repo" tabindex="-1" role="dialog">
                <div class="modal-dialog modal-lg" role="document">
                  <div class="modal-content">
                    <div class="modal-header">
                      <h5 class="modal-title" id="exampleModalLongTitle">Week_4 Report</h5>
                      <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                      </button>
                    </div>
                    <div class="modal-body">
                      <div>
                          <h5><b>DONE</b></h5>
                          <ul>
                              <li><b>Added "meta" and "meta_id" to CSV</b>
                                  <p> meta_id is an id for Ids. NO meta for RE and AR</p>
                              </li>
                              <li><b>ADD has_next to authors' role</b>
                                <p>Now authors in a BR have an order</p>
                            </li>
                            <li><b>Graphlib Upgrade</b>
                                <p> 
                                        line 478: even if there's an existing res It is necessary to specify "main tipe".
                                        <pre><code>return self._generate_entity(cur_g, res=res, res_type=main_type, resp_agent=resp_agent, source_agent=source_agent, source=source, list_of_entities=list_of_entities)</code></pre>
                                    
                                        line 127: existing_ref = False<br>
                                        This boolean prevent to generate entity main type (ex. fabio:expression) and label. <b>It was removed</b>
                                </p>
                            </li>
                            <li><b>converter.py</b>
                                <p>An auxiliary/temporary algorithm to help the testcase creation, from its ashes the CSV_Enrichener algorithm will arise (same as for its TDD)</p>
                            </li>
                            <li><b>New TestCases</b>
                                <p>Added new tests related to the structure venue-volume-issue:</p>
                                <ul>
                                    <li><b>testcase1:</b> 2 different issues of the same venue (no volume)</li>
                                    <li><b>testcase2:</b> 2 different volumes of the same venue (no issue)</li>
                                    <li><b>testcase3:</b> 2 different issues of the same volume</li>
                                </ul>
                            </li>
                          </ul>
                        <h5><b>Questions</b></h5>
                        <ol>
                            <li><b>ID list</b><p>need a list of every Ids that Migrator can handle </p></li>
                            <li><b>TYPE list</b><p>need a list of every types that Migrator can handle </p></li>
                            <li><b>Not clear:</b><p>Is it possible to have "volume" and/or "issue" without "venue"?</p></li>
                            <li><b>Venue</b> <p>Graphlib doesn't provide a venue-type for venues, is it ok?</p></li>
                            <li><b>AR & RE</b> <p>They are unique, so I actually don't need to asign them in csv, they are created by graphlib as well...Is it right?</p></li>
                            <li><b>NO IDs CASE:</b><p>i.e. Is it possible to have an author (or publisher, or venue...) without ids?</p></li>
                            <li><b>RDFLIB BUG:</b><p> <a href="https://github.com/RDFLib/rdflib/issues/806" terget="_blank">ISSUE</a> (Essepuntato was here!)</p></li>
                          </ol>
                      </div>
                    </div>
                    <div class="modal-footer">
                      <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                  </div>
                </div>
              </div>

</body>
</html>